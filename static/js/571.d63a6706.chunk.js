"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[571],{6571:function(e,a,t){t.r(a),t.d(a,{default:function(){return M}});var r=t(3433),n=t(5861),o=t(9439),s=t(4687),i=t.n(s),c=t(2791),l="ImageGallery_imageGallery__QlgGG",u="ImageGallery_imageGalleryContainer__Uwz8+",m="ImageGalleryItem_imageGalleryItem__+0s7b",g="ImageGalleryItem_imageGalleryItemImage__eYs3O",d=t(184);function h(e){var a=e.images,t=e.status,r=e.onImageClick;if("resolved"===t)return a.map((function(e){var a=e.webformatURL,t=e.tags,n=e.largeImageURL;return(0,d.jsx)("li",{className:m,children:(0,d.jsx)("img",{className:g,src:a,alt:t,onClick:function(){return r(n)}})},n)}))}var f="Button_loadButton__9BLGl",_=function(e){var a=e.pageChanger;return(0,d.jsx)("button",{type:"button",className:f,onClick:a,children:"Load more"})};function p(e){var a=e.images,t=e.pageChanger,r=e.status,n=e.onImageClick,o=e.isButtonVisible;return(0,d.jsx)(d.Fragment,{children:a.length>0&&(0,d.jsxs)("div",{className:u,children:[(0,d.jsx)("ul",{className:l,children:(0,d.jsx)(h,{images:a,status:r,onImageClick:n})}),o&&"pending"!==r&&(0,d.jsx)(_,{pageChanger:t})]})})}var v="Searchbar_searchbar__tXQe2",x="Searchbar_searchForm__q3-i9",b="Searchbar_searchFormButton__s3vEd",y="Searchbar_searchFormInput__c2Hvx",j=t(1686),k=t.n(j),S=t(828);function w(e){var a=e.handleFormSubmit,t=(0,c.useState)(""),r=(0,o.Z)(t,2),n=r[0],s=r[1];return(0,d.jsx)("div",{className:v,children:(0,d.jsxs)("form",{className:x,onSubmit:function(e){e.preventDefault();var t=n.trim().toLowerCase();""!==t?a(t):k().Notify.info("Please enter something")},children:[(0,d.jsx)("button",{type:"submit",className:b,children:(0,d.jsx)(S.Yfv,{style:{width:"20px",height:"20px"}})}),(0,d.jsx)("input",{className:y,value:n,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){var a=e.currentTarget.value;s(a)}})]})})}var I=t(4164),C="Modal_overlay__ROLG0",N="Modal_modal__k9cTZ",Z="Modal_modal__picture__5kINp",G=document.querySelector("#modal-root");function F(e){var a=e.closeModal,t=e.largeImageURL,r=function(e){"Escape"===e.code&&a()};return(0,c.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}})),(0,I.createPortal)((0,d.jsx)("div",{className:C,onClick:function(e){e.currentTarget===e.target&&a()},children:(0,d.jsx)("div",{className:N,children:(0,d.jsx)("img",{className:Z,src:t,alt:"full version"})})}),G)}var L=t(5067),B="ImageFinder_errorContainer__rgKqU",E="ImageFinder_errorMessage__2BxK-",M=function(){var e=(0,c.useState)(""),a=(0,o.Z)(e,2),t=a[0],s=a[1],l=(0,c.useState)(1),u=(0,o.Z)(l,2),m=u[0],g=u[1],h=(0,c.useState)(12),f=(0,o.Z)(h,2),_=f[0],v=f[1],x=(0,c.useState)([]),b=(0,o.Z)(x,2),y=b[0],j=b[1],S=(0,c.useState)("idle"),I=(0,o.Z)(S,2),C=I[0],N=I[1],Z=(0,c.useState)(""),G=(0,o.Z)(Z,2),M=G[0],U=G[1],R=(0,c.useState)(!1),q=(0,o.Z)(R,2),P=q[0],T=q[1],Y=(0,c.useState)(!1),z=(0,o.Z)(Y,2),H=z[0],K=z[1],O=function(){var e=(0,n.Z)(i().mark((function e(){var a,n,o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://pixabay.com/api","36858767-c9bdee91508ce121a2eb6b95d",e.next=5,fetch("".concat("https://pixabay.com/api","/?q=").concat(t,"&page=").concat(m,"&key=").concat("36858767-c9bdee91508ce121a2eb6b95d","&image_type=photo&orientation=horizontal&per_page=12"));case 5:if((a=e.sent).ok){e.next=8;break}return e.abrupt("return",new Error("Something went wrong"));case 8:return e.next=10,a.json();case 10:if(n=e.sent,o=n.hits,s=n.total,c=n.totalHits,j([].concat((0,r.Z)(y),(0,r.Z)(o))),v(_+o.length),N("resolved"),0!==s){e.next=18;break}return k().Notify.info("Sorry, there is no image found"),e.abrupt("return",N("rejected"));case 18:if(c>_&&K(!0),!(c<_)){e.next=22;break}return K(!1),e.abrupt("return",k().Notify.info("Wow, look's like these are are all images"));case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0),K(!1);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){if(""===t)return K(!1),void N("idle");N("pending"),O()}),[t,m]);var Q=function(){T(!P)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w,{handleFormSubmit:function(e){if(e===t)return k().Notify.info("You have already searched this :) Please enter something else");s(e),g(1),j([]),v(12)}}),"pending"===C&&(0,d.jsx)(L.Z,{}),"rejected"===C&&(0,d.jsx)("div",{className:B,children:(0,d.jsx)("h1",{className:E,children:"Sorry, there are no images matching your search :("})}),(0,d.jsx)(p,{images:y,pageChanger:function(){g(m+1)},status:C,onImageClick:function(e){U(e),Q()},isButtonVisible:H,pictureCount:_}),P&&(0,d.jsx)(F,{closeModal:Q,largeImageURL:M})]})}}}]);
//# sourceMappingURL=571.d63a6706.chunk.js.map